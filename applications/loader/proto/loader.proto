syntax = "proto3";

package applications.grpc.loader.v1;

message Filters {
  optional PixelateFilter pixelate = 1;
}

message PixelateFilter {
  int64 size = 1;
}

message Resource {
  string id = 1;
  string itemId = 2;
  bool processed = 3;
  string processedId = 4;
}

message ResourceIdentifier {
  string id = 1;
  string itemId = 2;
}

message DeleteResourcesRequest {
  string itemId = 1;
  repeated string resourceIds = 2;
}

message GetResourcesRequest {
  string itemId = 1;
  repeated string resourceIds = 2;
}

message AppliedResources {
  ResourceIdentifier oldResource = 1;
  ResourceIdentifier newResource = 2;
}

message CopyResourcesAndApplyFilterRequest {
  repeated ResourceIdentifier resources = 1;
  Filters filters = 2;
}

message CopyResourcesAndApplyFilterResponse {
  repeated AppliedResources resources = 1;
}

message CreateOrGetResourcesFromUploadsRequest {
  string itemId = 1;
  repeated string resourceIds = 2;
  bool private = 3;
}

message CreateOrGetResourcesFromUploadsResponse {
  repeated string allResourceIds = 1;
}

message DeleteResourcesResponse {}

message GetResourcesResponse {
  repeated Resource resources = 1;
}

service Loader {
  rpc CreateOrGetResourcesFromUploads(CreateOrGetResourcesFromUploadsRequest) returns (CreateOrGetResourcesFromUploadsResponse);
  rpc DeleteResources(DeleteResourcesRequest) returns (DeleteResourcesResponse);
  rpc GetResources(GetResourcesRequest) returns (GetResourcesResponse);
  rpc CopyResourcesAndApplyFilter(CopyResourcesAndApplyFilterRequest) returns (CopyResourcesAndApplyFilterResponse);
}
