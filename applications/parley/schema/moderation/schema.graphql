"""Moderate the pending post input"""
input ModeratePostInput {
  """Pending post to take action against"""
  postId: ID!

  """If rejecting a pending post, put in the ID of a rejection reason"""
  postRejectionReasonId: ID

  """Any extra notes for the moderator"""
  notes: String!
}

"""Revert the pending post audit log input"""
input RevertPostAuditLogInput {
  """The audit log to revert"""
  postAuditLogId: ID!
}

"""Moderate the pending post payload"""
type ModeratePostPayload {
  """The audit log generated by the pending post"""
  postAuditLog: PostAuditLog
}

"""Revert the pending post audit log payload"""
type RevertPostAuditLogPayload {
  """The new state of the audit log"""
  postAuditLog: PostAuditLog
}

"""Toggle whether or not the moderator will be part of the queue"""
type ToggleModeratorSettingsInQueuePayload {
  """The new status of the moderator in queue"""
  moderatorSettingsInQueue: Boolean
}

extend type Mutation {
  """
  Moderate a specific pending post
  Pending post must belong to the moderator

  If rejecting, must input a rejection reason and additional notes
  """
  moderatePost(input: ModeratePostInput!): ModeratePostPayload

  """
  Revert an audit log, in case it was done incorrectly

  Will delete an infraction if there was one, but the rest of the audit log will generally stay intact
  """
  revertPostAuditLog(input: RevertPostAuditLogInput!): RevertPostAuditLogPayload

  """
  Toggle moderator status

  Will remove or add the moderator from the queue

  Current status can be queried from moderatorSettings of the account
  """
  toggleModeratorSettingsInQueue: ToggleModeratorSettingsInQueuePayload
}

type Moderator implements Node @key(fields: "id") {
  """The ID of the moderator"""
  id: ID!

  """The last time this moderator was selected for a post"""
  lastSelected: Time!
}

extend type Account {
  """
  Moderator settings and status for this account

  Viewable by the currently authenticated account or staff+
  """
  moderator: Moderator @goField(forceResolver: true)
}